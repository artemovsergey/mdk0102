# Практическая работа 26. Десериализация JSON-ответов в объекты C#

Десериализация JSON-ответов REST API в объекты C# с использованием System.Text.Json и Newtonsoft.Json

## Цель
Освоить практические навыки десериализации JSON-ответов в strongly-typed объекты C#, изучить различные подходы к работе с JSON данными и их валидации.

## Задачи
- Изучить основы работы с JSON в .NET
- Освоить десериализацию с помощью System.Text.Json
- Изучить работу с Newtonsoft.Json (Json.NET)
- Научиться создавать модели данных для JSON
- Освоить обработку сложных структур JSON
- Научиться валидировать десериализованные данные

## Теоретическая часть

### 1. Основы JSON десериализации в .NET

**Десериализация** - процесс преобразования JSON строки в объекты C#.

**Основные библиотеки**:
- **System.Text.Json** (встроенная в .NET Core 3.0+)
- **Newtonsoft.Json** (популярная сторонняя библиотека)

### 2. Сравнение библиотек

```csharp
// System.Text.Json
var user = JsonSerializer.Deserialize<User>(jsonString);

// Newtonsoft.Json
var user = JsonConvert.DeserializeObject<User>(jsonString);
```

### 3. Атрибуты для управления десериализацией

```csharp
public class User
{
    [JsonPropertyName("id")] // System.Text.Json
    [JsonProperty("id")]     // Newtonsoft.Json
    public int Id { get; set; }

    [JsonIgnore] // Игнорирование свойства
    public string IgnoredProperty { get; set; }
}
```

## Практический пример выполнения

### Проектная структура
```
JsonDeserializationTests/
│
├── Models/
│   ├── Simple/
│   │   ├── User.cs
│   │   ├── Post.cs
│   │   └── Comment.cs
│   ├── Complex/
│   │   ├── Company.cs
│   │   ├── Geo.cs
│   │   └── Address.cs
│   └── Custom/
│       ├── CustomConverter.cs
│       └── CustomContractResolver.cs
│
├── Services/
│   ├── SystemTextJsonService.cs
│   ├── NewtonsoftJsonService.cs
│   └── IJsonDeserializer.cs
│
├── Tests/
│   ├── BasicDeserializationTests.cs
│   ├── ComplexDeserializationTests.cs
│   ├── CustomDeserializationTests.cs
│   └── PerformanceTests.cs
│
├── TestData/
│   └── JsonSamples.cs
│
└── JsonDeserializationTests.csproj
```

### Пример 1: Базовые модели и десериализация

#### Простые модели
```csharp
// Models/Simple/User.cs
using System.Text.Json.Serialization;

namespace JsonDeserializationTests.Models.Simple
{
    public class User
    {
        [JsonPropertyName("id")]
        public int Id { get; set; }

        [JsonPropertyName("name")]
        public string Name { get; set; }

        [JsonPropertyName("username")]
        public string Username { get; set; }

        [JsonPropertyName("email")]
        public string Email { get; set; }

        [JsonPropertyName("phone")]
        public string Phone { get; set; }

        [JsonPropertyName("website")]
        public string Website { get; set; }

        public override string ToString()
        {
            return $"User: {Name} ({Email})";
        }
    }
}

// Models/Simple/Post.cs
public class Post
{
    [JsonPropertyName("userId")]
    public int UserId { get; set; }

    [JsonPropertyName("id")]
    public int Id { get; set; }

    [JsonPropertyName("title")]
    public string Title { get; set; }

    [JsonPropertyName("body")]
    public string Body { get; set; }
}

// Models/Simple/Comment.cs
public class Comment
{
    [JsonPropertyName("postId")]
    public int PostId { get; set; }

    [JsonPropertyName("id")]
    public int Id { get; set; }

    [JsonPropertyName("name")]
    public string Name { get; set; }

    [JsonPropertyName("email")]
    public string Email { get; set; }

    [JsonPropertyName("body")]
    public string Body { get; set; }
}
```

#### Сервисы десериализации
```csharp
// Services/IJsonDeserializer.cs
namespace JsonDeserializationTests.Services
{
    public interface IJsonDeserializer
    {
        T Deserialize<T>(string json);
        object Deserialize(string json, Type type);
        Task<T> DeserializeFromStreamAsync<T>(Stream stream);
    }
}

// Services/SystemTextJsonService.cs
using System.Text.Json;
using JsonDeserializationTests.Models.Simple;

namespace JsonDeserializationTests.Services
{
    public class SystemTextJsonService : IJsonDeserializer
    {
        private readonly JsonSerializerOptions _options;

        public SystemTextJsonService()
        {
            _options = new JsonSerializerOptions
            {
                PropertyNamingPolicy = JsonNamingPolicy.CamelCase,
                PropertyNameCaseInsensitive = true,
                WriteIndented = true
            };
        }

        public SystemTextJsonService(JsonSerializerOptions options)
        {
            _options = options;
        }

        public T Deserialize<T>(string json)
        {
            return JsonSerializer.Deserialize<T>(json, _options);
        }

        public object Deserialize(string json, Type type)
        {
            return JsonSerializer.Deserialize(json, type, _options);
        }

        public async Task<T> DeserializeFromStreamAsync<T>(Stream stream)
        {
            return await JsonSerializer.DeserializeAsync<T>(stream, _options);
        }

        // Специализированные методы для часто используемых типов
        public List<User> DeserializeUsers(string json)
        {
            return Deserialize<List<User>>(json);
        }

        public User DeserializeUser(string json)
        {
            return Deserialize<User>(json);
        }

        public List<Post> DeserializePosts(string json)
        {
            return Deserialize<List<Post>>(json);
        }
    }
}

// Services/NewtonsoftJsonService.cs
using Newtonsoft.Json;
using JsonDeserializationTests.Models.Simple;

namespace JsonDeserializationTests.Services
{
    public class NewtonsoftJsonService : IJsonDeserializer
    {
        private readonly JsonSerializerSettings _settings;

        public NewtonsoftJsonService()
        {
            _settings = new JsonSerializerSettings
            {
                NullValueHandling = NullValueHandling.Ignore,
                MissingMemberHandling = MissingMemberHandling.Ignore,
                DateFormatHandling = DateFormatHandling.IsoDateFormat
            };
        }

        public NewtonsoftJsonService(JsonSerializerSettings settings)
        {
            _settings = settings;
        }

        public T Deserialize<T>(string json)
        {
            return JsonConvert.DeserializeObject<T>(json, _settings);
        }

        public object Deserialize(string json, Type type)
        {
            return JsonConvert.DeserializeObject(json, type, _settings);
        }

        public async Task<T> DeserializeFromStreamAsync<T>(Stream stream)
        {
            using var streamReader = new StreamReader(stream);
            using var jsonReader = new JsonTextReader(streamReader);
            var serializer = JsonSerializer.CreateDefault(_settings);
            return serializer.Deserialize<T>(jsonReader);
        }

        // Специализированные методы
        public List<User> DeserializeUsers(string json)
        {
            return Deserialize<List<User>>(json);
        }

        public User DeserializeUser(string json)
        {
            return Deserialize<User>(json);
        }
    }
}
```

### Пример 2: Тесты базовой десериализации

```csharp
// Tests/BasicDeserializationTests.cs
using NUnit.Framework;
using JsonDeserializationTests.Models.Simple;
using JsonDeserializationTests.Services;
using JsonDeserializationTests.TestData;
using System.Text.Json;

namespace JsonDeserializationTests.Tests
{
    [TestFixture]
    public class BasicDeserializationTests
    {
        private SystemTextJsonService _systemTextJsonService;
        private NewtonsoftJsonService _newtonsoftJsonService;

        [SetUp]
        public void Setup()
        {
            _systemTextJsonService = new SystemTextJsonService();
            _newtonsoftJsonService = new NewtonsoftJsonService();
        }

        [Test]
        public void DeserializeUser_SystemTextJson_ShouldReturnValidObject()
        {
            // Arrange
            var json = JsonSamples.SingleUserJson;

            // Act
            var user = _systemTextJsonService.DeserializeUser(json);

            // Assert
            Assert.That(user, Is.Not.Null);
            Assert.That(user.Id, Is.EqualTo(1));
            Assert.That(user.Name, Is.EqualTo("Leanne Graham"));
            Assert.That(user.Username, Is.EqualTo("Bret"));
            Assert.That(user.Email, Is.EqualTo("Sincere@april.biz"));
        }

        [Test]
        public void DeserializeUser_NewtonsoftJson_ShouldReturnValidObject()
        {
            // Arrange
            var json = JsonSamples.SingleUserJson;

            // Act
            var user = _newtonsoftJsonService.DeserializeUser(json);

            // Assert
            Assert.That(user, Is.Not.Null);
            Assert.That(user.Id, Is.EqualTo(1));
            Assert.That(user.Name, Is.EqualTo("Leanne Graham"));
            Assert.That(user.Email, Is.EqualTo("Sincere@april.biz"));
        }

        [Test]
        public void DeserializeUsersList_SystemTextJson_ShouldReturnList()
        {
            // Arrange
            var json = JsonSamples.UsersArrayJson;

            // Act
            var users = _systemTextJsonService.DeserializeUsers(json);

            // Assert
            Assert.That(users, Is.Not.Null);
            Assert.That(users, Is.InstanceOf<List<User>>());
            Assert.That(users, Has.Count.GreaterThan(0));
            Assert.That(users[0].Id, Is.GreaterThan(0));
            Assert.That(users[0].Name, Is.Not.Null.And.Not.Empty);
        }

        [Test]
        public void DeserializePosts_WithNestedProperties_ShouldWorkCorrectly()
        {
            // Arrange
            var json = JsonSamples.PostsArrayJson;

            // Act
            var posts = _systemTextJsonService.DeserializePosts(json);

            // Assert
            Assert.That(posts, Is.Not.Null);
            Assert.That(posts, Has.Count.GreaterThan(0));
            
            var firstPost = posts[0];
            Assert.That(firstPost.UserId, Is.GreaterThan(0));
            Assert.That(firstPost.Title, Is.Not.Null.And.Not.Empty);
            Assert.That(firstPost.Body, Is.Not.Null.And.Not.Empty);
        }

        [Test]
        public void Deserialize_InvalidJson_ShouldThrowException()
        {
            // Arrange
            var invalidJson = "{ invalid json }";

            // Act & Assert
            Assert.Throws<JsonException>(() => 
                _systemTextJsonService.Deserialize<User>(invalidJson));
        }

        [Test]
        public void Deserialize_WithMissingProperties_ShouldUseDefaultValues()
        {
            // Arrange
            var partialJson = @"{
                ""id"": 1,
                ""name"": ""Test User""
                // email and username are missing
            }";

            // Act
            var user = _systemTextJsonService.DeserializeUser(partialJson);

            // Assert
            Assert.That(user, Is.Not.Null);
            Assert.That(user.Id, Is.EqualTo(1));
            Assert.That(user.Name, Is.EqualTo("Test User"));
            Assert.That(user.Email, Is.Null);
            Assert.That(user.Username, Is.Null);
        }

        [Test]
        public void CompareSystemTextJsonAndNewtonsoft_ShouldProduceSameResults()
        {
            // Arrange
            var json = JsonSamples.SingleUserJson;

            // Act
            var userSystemText = _systemTextJsonService.DeserializeUser(json);
            var userNewtonsoft = _newtonsoftJsonService.DeserializeUser(json);

            // Assert
            Assert.That(userSystemText.Id, Is.EqualTo(userNewtonsoft.Id));
            Assert.That(userSystemText.Name, Is.EqualTo(userNewtonsoft.Name));
            Assert.That(userSystemText.Email, Is.EqualTo(userNewtonsoft.Email));
            Assert.That(userSystemText.Username, Is.EqualTo(userNewtonsoft.Username));
        }
    }
}
```

### Пример 3: Сложные модели и кастомная десериализация

#### Сложные модели с вложенными объектами
```csharp
// Models/Complex/Address.cs
using System.Text.Json.Serialization;

namespace JsonDeserializationTests.Models.Complex
{
    public class Address
    {
        [JsonPropertyName("street")]
        public string Street { get; set; }

        [JsonPropertyName("suite")]
        public string Suite { get; set; }

        [JsonPropertyName("city")]
        public string City { get; set; }

        [JsonPropertyName("zipcode")]
        public string Zipcode { get; set; }

        [JsonPropertyName("geo")]
        public Geo Geo { get; set; }
    }

    public class Geo
    {
        [JsonPropertyName("lat")]
        public string Lat { get; set; }

        [JsonPropertyName("lng")]
        public string Lng { get; set; }
    }

    public class Company
    {
        [JsonPropertyName("name")]
        public string Name { get; set; }

        [JsonPropertyName("catchPhrase")]
        public string CatchPhrase { get; set; }

        [JsonPropertyName("bs")]
        public string Bs { get; set; }
    }

    public class ComplexUser
    {
        [JsonPropertyName("id")]
        public int Id { get; set; }

        [JsonPropertyName("name")]
        public string Name { get; set; }

        [JsonPropertyName("username")]
        public string Username { get; set; }

        [JsonPropertyName("email")]
        public string Email { get; set; }

        [JsonPropertyName("address")]
        public Address Address { get; set; }

        [JsonPropertyName("phone")]
        public string Phone { get; set; }

        [JsonPropertyName("website")]
        public string Website { get; set; }

        [JsonPropertyName("company")]
        public Company Company { get; set; }

        public string GetFullAddress()
        {
            return $"{Address?.Street} {Address?.Suite}, {Address?.City} {Address?.Zipcode}";
        }
    }
}
```

#### Кастомные конвертеры
```csharp
// Models/Custom/CustomConverter.cs
using System.Text.Json;
using System.Text.Json.Serialization;

namespace JsonDeserializationTests.Models.Custom
{
    public class CustomDateTimeConverter : JsonConverter<DateTime>
    {
        private readonly string _format;

        public CustomDateTimeConverter(string format = "yyyy-MM-dd")
        {
            _format = format;
        }

        public override DateTime Read(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
        {
            return DateTime.ParseExact(reader.GetString(), _format, null);
        }

        public override void Write(Utf8JsonWriter writer, DateTime value, JsonSerializerOptions options)
        {
            writer.WriteStringValue(value.ToString(_format));
        }
    }

    public class StringToIntConverter : JsonConverter<int>
    {
        public override int Read(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
        {
            if (reader.TokenType == JsonTokenType.String)
            {
                var stringValue = reader.GetString();
                if (int.TryParse(stringValue, out int result))
                {
                    return result;
                }
            }
            else if (reader.TokenType == JsonTokenType.Number)
            {
                return reader.GetInt32();
            }

            throw new JsonException($"Cannot convert to Int32: {reader.GetString()}");
        }

        public override void Write(Utf8JsonWriter writer, int value, JsonSerializerOptions options)
        {
            writer.WriteNumberValue(value);
        }
    }
}

// Модели с кастомными преобразованиями
public class UserWithCustomProperties
{
    [JsonPropertyName("id")]
    [JsonConverter(typeof(StringToIntConverter))]
    public int Id { get; set; }

    [JsonPropertyName("name")]
    public string Name { get; set; }

    [JsonPropertyName("registrationDate")]
    [JsonConverter(typeof(CustomDateTimeConverter))]
    public DateTime RegistrationDate { get; set; }

    [JsonPropertyName("lastLogin")]
    [JsonConverter(typeof(CustomDateTimeConverter))]
    public DateTime? LastLogin { get; set; }

    [JsonIgnore]
    public string DisplayInfo => $"{Name} (Registered: {RegistrationDate:yyyy-MM-dd})";
}
```

### Пример 4: Тесты сложной десериализации

```csharp
// Tests/ComplexDeserializationTests.cs
using NUnit.Framework;
using JsonDeserializationTests.Models.Complex;
using JsonDeserializationTests.Services;
using JsonDeserializationTests.TestData;
using System.Text.Json;

namespace JsonDeserializationTests.Tests
{
    [TestFixture]
    public class ComplexDeserializationTests
    {
        private SystemTextJsonService _jsonService;

        [SetUp]
        public void Setup()
        {
            _jsonService = new SystemTextJsonService();
        }

        [Test]
        public void DeserializeComplexUser_WithNestedObjects_ShouldWorkCorrectly()
        {
            // Arrange
            var json = JsonSamples.ComplexUserJson;

            // Act
            var user = _jsonService.Deserialize<ComplexUser>(json);

            // Assert
            Assert.That(user, Is.Not.Null);
            Assert.That(user.Address, Is.Not.Null);
            Assert.That(user.Address.Street, Is.EqualTo("Kulas Light"));
            Assert.That(user.Address.City, Is.EqualTo("Gwenborough"));
            Assert.That(user.Address.Geo, Is.Not.Null);
            Assert.That(user.Address.Geo.Lat, Is.EqualTo("-37.3159"));
            Assert.That(user.Company, Is.Not.Null);
            Assert.That(user.Company.Name, Is.EqualTo("Romaguera-Crona"));
        }

        [Test]
        public void DeserializeComplexUser_WithCustomConverter_ShouldParseDatesCorrectly()
        {
            // Arrange
            var json = @"{
                ""id"": ""123"",
                ""name"": ""Test User"",
                ""registrationDate"": ""2023-01-15"",
                ""lastLogin"": ""2023-12-01""
            }";

            var options = new JsonSerializerOptions
            {
                PropertyNamingPolicy = JsonNamingPolicy.CamelCase,
                Converters = { 
                    new StringToIntConverter(),
                    new CustomDateTimeConverter() 
                }
            };

            var customService = new SystemTextJsonService(options);

            // Act
            var user = customService.Deserialize<UserWithCustomProperties>(json);

            // Assert
            Assert.That(user, Is.Not.Null);
            Assert.That(user.Id, Is.EqualTo(123));
            Assert.That(user.RegistrationDate.Year, Is.EqualTo(2023));
            Assert.That(user.RegistrationDate.Month, Is.EqualTo(1));
            Assert.That(user.LastLogin, Is.Not.Null);
            Assert.That(user.LastLogin.Value.Year, Is.EqualTo(2023));
        }

        [Test]
        public void DeserializePolymorphicObjects_ShouldUseDiscriminator()
        {
            // Arrange
            var json = @"[
                { ""type"": ""admin"", ""id"": 1, ""name"": ""Admin User"", ""permissions"": [""read"", ""write"", ""delete""] },
                { ""type"": ""user"", ""id"": 2, ""name"": ""Regular User"", ""email"": ""user@test.com"" }
            ]";

            // Act & Assert - Этот тест демонстрирует необходимость кастомной логики для полиморфной десериализации
            var objects = _jsonService.Deserialize<List<Dictionary<string, object>>>(json);
            
            Assert.That(objects, Has.Count.EqualTo(2));
            Assert.That(objects[0]["type"], Is.EqualTo("admin"));
            Assert.That(objects[1]["type"], Is.EqualTo("user"));
        }
    }
}
```

## Ход работы

### Общие шаги для всех вариантов:
1. **Создайте новый проект** типа Class Library
2. **Установите необходимые NuGet пакеты** (NUnit, Newtonsoft.Json)
3. **Создайте структуру папок** согласно шаблону
4. **Реализуйте модели данных** для вашего JSON API
5. **Создайте сервисы десериализации** для обеих библиотек
6. **Напишите тесты** для различных сценариев десериализации
7. **Реализуйте кастомные конвертеры** для сложных случаев
8. **Добавьте обработку ошибок** и валидацию данных
9. **Создайте README.md** с описанием проекта

## 15 вариантов задания

### Вариант 1: JSONPlaceholder - Users
**Задание**: Реализовать десериализацию данных пользователей:
- Одиночный пользователь
- Массив пользователей
- Пользователь с адресом и компанией

**Требования**: Создать полную модель пользователя, включая вложенные объекты.

### Вариант 2: JSONPlaceholder - Posts and Comments
**Задание**: Реализовать десериализацию постов и комментариев:
- Посты с пользователями
- Комментарии к постам
- Вложенные структуры

**Требования**: Создать связанные модели, обработать отношения между сущностями.

### Вариант 3: OpenWeatherMap API
**Задание**: Реализовать десериализацию данных погоды:
- Текущая погода
- Прогноз на 5 дней
- Геолокационные данные

**Требования**: Обработать сложные метеорологические данные, единицы измерения.

### Вариант 4: GitHub API - Repositories
**Задание**: Реализовать десериализацию репозиториев GitHub:
- Информация о репозитории
- Список репозиториев пользователя
- Статистика и языки программирования

**Требования**: Работа с датами, кастомные форматы.

### Вариант 5: REST Countries API
**Задание**: Реализовать десериализацию данных стран:
- Полная информация о стране
- Список стран с фильтрацией
- Валюты и языки

**Требования**: Обработка массивов объектов, сложные структуры.

### Вариант 6: Financial Data API (Alpha Vantage)
**Задание**: Реализовать десериализацию финансовых данных:
- Цены акций
- Технические индикаторы
- Валютные курсы

**Требования**: Работа с временными рядами, числовыми данными.

### Вариант 7: News API
**Задание**: Реализовать десериализацию новостных данных:
- Статьи и новости
- Источники новостей
- Мета-информация

**Требования**: Обработка дат, HTML контента, мультимедиа.

### Вариант 8: E-commerce API (DummyJSON)
**Задание**: Реализовать десериализацию данных интернет-магазина:
- Товары и категории
- Корзины покупок
- Пользователи и заказы

**Требования**: Сложные бизнес-объекты, отношения.

### Вариант 9: NASA APIs
**Задание**: Реализовать десериализацию данных NASA:
- Astronomy Picture of the Day
- Марсоходы
- Near Earth Objects

**Требования**: Работа с датами, изображениями, научными данными.

### Вариант 10: JSONPlaceholder - Todos and Albums
**Задание**: Реализовать десериализацию задач и альбомов:
- Задачи пользователей
- Альбомы и фотографии
- Статусы выполнения

**Требования**: Булевы значения, перечисления, статусы.

### Вариант 11: COVID-19 Statistics API
**Задание**: Реализовать десериализацию статистики COVID-19:
- Глобальная статистика
- Статистика по странам
- Исторические данные

**Требования**: Большие наборы данных, временные ряды.

### Вариант 12: Movie Database API (OMDb)
**Задание**: Реализовать десериализацию данных о фильмах:
- Информация о фильмах
- Поиск и фильтрация
- Рейтинги и отзывы

**Требования**: Обработка рейтингов, жанров, дат выпуска.

### Вариант 13: Transportation API (Google Maps)
**Задание**: Реализовать десериализацию данных транспорта:
- Маршруты и направления
- Общественный транспорт
- Traffic data

**Требования**: Геоданные, полилинии, временные интервалы.

### Вариант 14: Social Media API (JSONPlaceholder)
**Задание**: Реализовать десериализацию социальных данных:
- Посты с комментариями
- Альбомы с фотографиями
- Задачи пользователей

**Требования**: Комплексные объекты с множеством связей.

### Вариант 15: Custom JSON Schema
**Задание**: Реализовать десериализацию по кастомной JSON схеме:
- Динамические объекты
- Полиморфные типы
- Кастомные форматы данных

**Требования**: Гибкая десериализация, обработка неизвестных полей.

## Критерии оценки

### Отлично (9-10 баллов)
- Реализованы все модели данных согласно варианту
- Созданы сервисы для обеих библиотек десериализации
- Написаны комплексные тесты для различных сценариев
- Реализованы кастомные конвертеры для сложных случаев
- Добавлена обработка ошибок и валидация данных
- README.md содержит полное описание с примерами

### Хорошо (7-8 баллов)
- Реализованы основные модели данных
- Созданы базовые сервисы десериализации
- Написаны основные тестовые сценарии
- Покрыты основные случаи десериализации
- README.md содержит описание выполнения

### Удовлетворительно (5-6 баллов)
- Реализованы базовые модели данных
- Создан простой сервис десериализации
- Написаны минимальные тесты
- README.md содержит краткое описание

### Неудовлетворительно (0-4 баллов)
- Модели не реализованы или реализованы с ошибками
- Сервисы десериализации не работают
- Тесты отсутствуют или не проходят
- README.md отсутствует

## Контрольные вопросы

1. В чем разница между System.Text.Json и Newtonsoft.Json?
2. Как игнорировать свойства при десериализации?
3. Как работать с кастомными форматами дат?
4. Как десериализовать полиморфные объекты?
5. Какие атрибуты используются для управления десериализацией?
6. Как обрабатывать отсутствующие свойства в JSON?
7. Как создать кастомный JSON конвертер?
8. Как десериализовать JSON из потока (Stream)?
9. Как валидировать десериализованные данные?
10. Какие лучшие практики создания моделей для JSON?

---

## Пример реализации для варианта 1

### TestData/JsonSamples.cs
```csharp
namespace JsonDeserializationTests.TestData
{
    public static class JsonSamples
    {
        public static string SingleUserJson => """
        {
            "id": 1,
            "name": "Leanne Graham",
            "username": "Bret",
            "email": "Sincere@april.biz",
            "phone": "1-770-736-8031 x56442",
            "website": "hildegard.org"
        }
        """;

        public static string UsersArrayJson => """
        [
            {
                "id": 1,
                "name": "Leanne Graham",
                "username": "Bret",
                "email": "Sincere@april.biz"
            },
            {
                "id": 2,
                "name": "Ervin Howell",
                "username": "Antonette",
                "email": "Shanna@melissa.tv"
            }
        ]
        """;

        public static string ComplexUserJson => """
        {
            "id": 1,
            "name": "Leanne Graham",
            "username": "Bret",
            "email": "Sincere@april.biz",
            "address": {
                "street": "Kulas Light",
                "suite": "Apt. 556",
                "city": "Gwenborough",
                "zipcode": "92998-3874",
                "geo": {
                    "lat": "-37.3159",
                    "lng": "81.1496"
                }
            },
            "phone": "1-770-736-8031 x56442",
            "website": "hildegard.org",
            "company": {
                "name": "Romaguera-Crona",
                "catchPhrase": "Multi-layered client-server neural-net",
                "bs": "harness real-time e-markets"
            }
        }
        """;

        public static string PostsArrayJson => """
        [
            {
                "userId": 1,
                "id": 1,
                "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
                "body": "quia et suscipit suscipit recusandae consequuntur expedita et cum reprehenderit molestiae ut ut quas totam nostrum rerum est autem sunt rem eveniet architecto"
            },
            {
                "userId": 1,
                "id": 2,
                "title": "qui est esse",
                "body": "est rerum tempore vitae sequi sint nihil reprehenderit dolor beatae ea dolores neque fugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis qui aperiam non debitis possimus qui neque nisi nulla"
            }
        ]
        """;
    }
}
```

### README.md
```markdown
# Практическая работа 26: Десериализация JSON-ответов в объекты C#

## Вариант 1: JSONPlaceholder - Users

### Задание
Реализовать десериализацию данных пользователей:
- Одиночный пользователь
- Массив пользователей  
- Пользователь с адресом и компанией

### Реализация

#### Структура проекта
```
JsonDeserializationTests/
├── Models/
│   ├── Simple/
│   │   ├── User.cs
│   │   ├── Post.cs
│   │   └── Comment.cs
│   └── Complex/
│       ├── ComplexUser.cs
│       ├── Address.cs
│       ├── Geo.cs
│       └── Company.cs
├── Services/
│   ├── SystemTextJsonService.cs
│   ├── NewtonsoftJsonService.cs
│   └── IJsonDeserializer.cs
├── Tests/
│   ├── BasicDeserializationTests.cs
│   └── ComplexDeserializationTests.cs
├── TestData/
│   └── JsonSamples.cs
└── README.md
```

#### Пример десериализации
```csharp
// Использование System.Text.Json
var jsonService = new SystemTextJsonService();
var user = jsonService.Deserialize<User>(jsonString);

// Использование Newtonsoft.Json
var newtonsoftService = new NewtonsoftJsonService();
var user = newtonsoftService.Deserialize<User>(jsonString);
```

#### Пример модели ComplexUser
```csharp
public class ComplexUser
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Address Address { get; set; }
    public Company Company { get; set; }
}

public class Address
{
    public string Street { get; set; }
    public string City { get; set; }
    public Geo Geo { get; set; }
}
```

#### Запуск тестов
```bash
dotnet test
```

### Результаты
Реализована полная десериализация пользовательских данных JSONPlaceholder API с поддержкой обеих основных библиотек JSON в .NET.
```
