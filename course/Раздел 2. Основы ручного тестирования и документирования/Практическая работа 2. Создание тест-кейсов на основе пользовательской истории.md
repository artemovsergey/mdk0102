# Практическая работа 2. Создание тест-кейсов на основе пользовательской истории

### **Цель:**
Сформировать у студентов навык анализа пользовательских историй (User Stories), выделения критериев приемки (Acceptance Criteria) и проектирования на их основе детализированных тест-кейсов для ручного тестирования. Закрепить понимание связи между требованиями заказчика и тестовой документацией.

### **Теоретическая часть**

**Пользовательская история (User Story)** — это краткое, простое описание функции, рассказанное с точки зрения пользователя, который хочет получить определенную выгоду. Обычно форматируется по шаблону:
**Как [роль пользователя], я хочу [выполнить действие], чтобы [получить пользу/достичь цели].**

**Критерии приемки (Acceptance Criteria)** — это условия, которым должно удовлетворять программное обеспечение, чтобы пользователь мог принять его как работающее. Это перечень сценариев, которые определяют, когда история считается завершенной.

**Тест-кейс (Test Case)** — это артефакт, описывающий совокупность шагов, конкретных условий и параметров, необходимых для проверки реализации тестируемой функции или её части. Стандартные поля тест-кейса:
*   ID (Идентификатор)
*   Название (Title/Summary)
*   Предусловие (Preconditions)
*   Шаги (Steps)
*   Ожидаемый результат (Expected Result)
*   Фактический результат (Actual Result) - заполняется во время выполнения
*   Статус (Status) - Pass/Fail/Blocked - выставляется после выполнения
*   Серьезность дефекта (Severity) - выставляется при падении кейса

**Процесс преобразования истории в тест-кейсы:**
1.  **Анализ пользовательской истории:** Определить, кто пользователь, что он делает и зачем.
2.  **Анализ критериев приемки:** Выделить все явные и неявные условия, которые должны быть выполнены.
3.  **Определение тестовых сценариев:** На основе критериев приемки и здравого смысла определить позитивные, негативные и граничные сценарии.
4.  **Детализация тест-кейсов:** Для каждого сценария создать формализованный тест-кейс с четкими шагами и ожидаемыми результатами.

### **Практический пример**

**Пользовательская история:**
*   **Как** зарегистрированный пользователь,
*   **Я хочу** иметь возможность выходить из своей учетной записи,
*   **Чтобы** обеспечить безопасность моих данных, если я пользуюсь общим компьютером.

**Критерии приемки:**
1.  Кнопка/ссылка "Выйти" отображается в интерфейсе после успешного входа в систему.
2.  После нажатия на кнопку "Выйти" система перенаправляет пользователя на страницу входа.
3.  После выхода пользователь больше не имеет доступа к защищенным страницам приложения (например, личный кабинет).
4.  При попытке доступа к защищенной странице после выхода система перенаправляет на страницу входа.

**Разработанные тест-кейсы:**

| ID | Название | Предусловия | Шаги | Ожидаемый результат | Статус | Серьезность |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **AC1-TC1** | Проверка видимости кнопки "Выйти" после авторизации | 1. Пользователь зарегистрирован в системе. | 1. Открыть страницу входа.<br>2. Ввести корректные логин и пароль.<br>3. Нажать кнопку "Войти". | Пользователь авторизован и перенаправлен на главную страницу. В интерфейсе отображается кнопка/ссылка "Выйти". | | |
| **AC2-TC1** | Проверка успешного выхода из системы | 1. Пользователь авторизован в системе. | 1. Найти и нажать на кнопку/ссылку "Выйти". | Система перенаправляет пользователя на страницу входа. Сессия завершена. | | |
| **AC3-TC1** | Проверка доступа к ЛК после выхода (негативный сценарий) | 1. Пользователь был авторизован и вышел из системы (шаги из AC2-TC1). | 1. В браузере перейти по прямому URL страницы "Личный кабинет". | Система перенаправляет пользователя на страницу входа. Содержимое личного кабинета не отображается. | | |
| **AC4-TC1** | Проверка редиректа на страницу входа при прямом доступе | 1. Пользователь не авторизован (сессия чистая). | 1. В браузере перейти по прямому URL защищенной страницы (например, "/profile"). | Система перенаправляет пользователя на страницу входа. | | |

---

### **Ход работы:**

1.  Согласно вашему варианту из журнала, выберите пользовательскую историю из списка заданий.
2.  Проанализируйте пользовательскую историю и критерии приемки.
3.  Создайте локальный репозиторий Git и инициализируйте его.
4.  Создайте файл `readme.md`.
5.  В файл `readme.md` добавьте:
    *   Номер и название практической работы.
    *   Ваш вариант и текст задания (пользовательскую историю и критерии приемки).
    *   Разработанные вами тест-кейсы в формате таблицы Markdown (как в примере выше).
6.  Добавьте файл `readme.md` в репозиторий, сделайте коммит.
7.  Создайте на локальном сервере Gogs новый пустой репозиторий с названием `Practical-Work-{Ваш_Вариант}` (например, `Practical-Work-3`).
8.  Свяжите ваш локальный репозиторий с удаленным репозиторием в Gogs.
9.  Отправьте (push) ваши изменения в репозиторий на Gogs.

---

### **Варианты заданий (для студентов)**

**Вариант 1:**
*   **История:** Как покупатель, я хочу иметь возможность фильтровать товары в каталоге по цене, чтобы быстро найти товары в моем бюджете.
*   **Критерии приемки:**
    1.  Поле "Мин. цена" и "Макс. цена" отображаются в блоке фильтров.
    2.  При применении фильтра в результатах отображаются только товары, чья цена находится в заданном диапазоне.
    3.  Если товаров, удовлетворяющих фильтру, нет, отображается сообщение "Товары не найдены".

**Вариант 2:**
*   **История:** Как пользователь, я хочу восстановить доступ к своему аккаунту с помощью электронной почты, если я забыл пароль.
*   **Критерии приемки:**
    1.  На странице входа есть ссылка "Забыли пароль?".
    2.  При переходе по ссылке открывается форма с полем для ввода email.
    3.  На указанный email приходит письмо со ссылкой для сброса пароля.
    4.  Ссылка для сброса активна в течение 1 часа.

**Вариант 3:**
*   **История:** Как авторизованный пользователь, я хочу добавлять товары в "Корзину", чтобы потом их все вместе купить.
*   **Критерии приемки:**
    1.  На странице товара есть кнопка "Добавить в корзину".
    2.  После добавления товара отображается сообщение "Товар добавлен в корзину".
    3.  Иконка корзины в шапке сайта обновляется, отображая новое количество товаров.
    4.  Товар появляется на странице "Корзина" с правильной ценой и количеством.

**Вариант 4:**
*   **История:** Как администратор, я хочу иметь возможность блокировать пользователей, чтобы ограничить доступ нарушителям правил.
*   **Критерии приемки:**
    1.  В списке пользователей в админ-панели есть кнопка "Заблокировать" для каждого активного пользователя.
    2.  После блокировки статус пользователя меняется на "Заблокирован".
    3.  Заблокированный пользователь не может войти в систему (получает сообщение "Ваш аккаунт заблокирован").
    4.  Для заблокированного пользователя кнопка в админ-панели меняется на "Разблокировать".

**Вариант 5:**
*   **История:** Как пользователь, я хочу искать товары по названию, чтобы быстро найти нужный мне продукт.
*   **Критерии приемки:**
    1.  Поле поиска отображается в шапке сайта.
    2.  Поиск работает по частичному совпадению (например, по "самс" находятся товары "Samsung").
    3.  Результаты поиска отображаются на отдельной странице.
    4.  Если ничего не найдено, отображается сообщение "По вашему запросу ничего не найдено".

*(Продолжение вариантов 6-15 следует по аналогии с простыми и понятными историями для таких функций как: изменение количества товара в корзине, оформление заказа, оставление отзыва, редактирование профиля, удаление товара из корзины, применение промокода, сортировка товаров, просмотр истории заказов, подтверждение email, переключение валюты на сайте и т.д.)*

**Вариант 6:** Добавление товара в "Избранное".
**Вариант 7:** Изменение количества товара в корзине.
**Вариант 8:** Оформление заказа (минимум: ввод адреса).
**Вариант 9:** Оставление отзыва к товару.
**Вариант 10:** Редактирование имени в профиле пользователя.
**Вариант 11:** Удаление товара из корзины.
**Вариант 12:** Применение промокода для скидки.
**Вариант 13:** Сортировка товаров в каталоге по названию (А-Я).
**Вариант 14:** Просмотр деталей конкретного заказа в истории заказов.
**Вариант 15:** Подтверждение адреса электронной почты после регистрации.

---

### **Критерии оценки:**

*   **5 (Отлично):**
    *   Репозиторий корректно создан и выложен на Gogs.
    *   Файл `readme.md` содержит все требуемые разделы, оформлен аккуратно.
    *   Созданы тест-кейсы, которые полностью покрывают все критерии приемки.
    *   Тест-кейсы содержат позитивные и негативные сценарии.
    *   Шаги тест-кейсов четкие, однозначные и воспроизводимые.
    *   Ожидаемые результаты сформулированы конкретно и проверяемо.

*   **4 (Хорошо):**
    *   Репозиторий создан и выложен.
    *   `readme.md` содержит все данные.
    *   Тест-кейсы покрывают все критерии приемки, но могут отсутствовать 1-2 негативных сценария.
    *   Шаги или ожидаемые результаты в 1-2 кейсах могут быть сформулированы немного размыто.

*   **3 (Удовлетворительно):**
    *   Репозиторий создан и выложен.
    *   `readme.md` содержит основные данные, но可能有 оформлены с ошибками.
    *   Созданы тест-кейсы, но они покрывают только основные (позитивные) сценарии.
    *   Шаги или ожидаемые результаты в нескольких кейсах неконкретны или их сложно воспроизвести.

*   **2 (Неудовлетворительно):**
    *   Репозиторий не создан или работа не сдана.
    *   Тест-кейсы не созданы или полностью не соответствуют критериям приемки.

---

### **Контрольные вопросы:**

1.  Что такое пользовательская история и какова ее стандартная структура?
2.  Какую роль выполняют критерии приемки в процессе тестирования?
3.  Назовите основные элементы тест-кейса и объясните назначение каждого.
4.  Чем позитивный тест-кейс отличается от негативного? Приведите примеры.
5.  Почему важно, чтобы шаги в тест-кейсе были однозначными и последовательными?
6.  Что такое граничное тестирование и как оно связано с пользовательскими историями?
7.  Какие тест-кейсы вы бы добавили к своей истории, если бы не было критериев приемки? (На основе здравого смысла и опыта пользователя).

---
## **Пример выполнения для студента (Вариант 1)**

Ниже приведен пример того, как студент может оформить свой `readme.md` для **Варианта 1**.

### **Файл: `readme.md`**

```markdown
# Практическая работа №3
## Создание тест-кейсов на основе пользовательской истории

**Студент:** Иванов Иван
**Группа:** ТСТ-41
**Вариант:** 1

---

### **Текст задания:**

**Пользовательская история:**
Как покупатель, я хочу иметь возможность фильтровать товары в каталоге по цене, чтобы быстро найти товары в моем бюджете.

**Критерии приемки:**
1.  Поле "Мин. цена" и "Макс. цена" отображаются в блоке фильтров.
2.  При применении фильтра в результатах отображаются только товары, чья цена находится в заданном диапазоне.
3.  Если товаров, удовлетворяющих фильтру, нет, отображается сообщение "Товары не найдены".

---

### **Разработанные тест-кейсы:**

| ID | Название | Предусловия | Шаги | Ожидаемый результат | Статус | Серьезность |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **AC1-TC1** | Проверка отображения полей фильтра по цене | 1. Открыта страница каталога товаров. | 1. Найти на странице блок "Фильтры".<br>2. Осмотреть блок "Фильтры". | В блоке "Фильтры" присутствуют два поля для ввода: "Мин. цена" и "Макс. цена". | | |
| **AC2-TC1** | Проверка фильтрации товаров по валидному диапазону цен (позитивный сценарий) | 1. Открыта страница каталога товаров. В каталоге есть товары. | 1. В поле "Мин. цена" ввести значение "100".<br>2. В поле "Макс. цена" ввести значение "500".<br>3. Нажать кнопку "Применить фильтры" или дождаться автоматического применения. | В списке товаров отображаются только те товары, цена которых находится в диапазоне от 100 до 500 условных единиц (включительно). | | |
| **AC2-TC2** | Проверка фильтрации, когда задана только минимальная цена | 1. Открыта страница каталога товаров. В каталоге есть товары. | 1. В поле "Мин. цена" ввести значение "200".<br>2. Поле "Макс. цена" оставить пустым.<br>3. Нажать кнопку "Применить фильтры". | В списке товаров отображаются только те товары, цена которых больше или равна 200. | | |
| **AC2-TC3** | Проверка фильтрации, когда задана только максимальная цена | 1. Открыта страница каталога товаров. В каталоге есть товары. | 1. Поле "Мин. цена" оставить пустым.<br>2. В поле "Макс. цена" ввести значение "300".<br>3. Нажать кнопку "Применить фильтры". | В списке товаров отображаются только те товары, цена которых меньше или равна 300. | | |
| **AC2-TC4** | Проверка фильтрации с некорректным диапазоном (мин. цена > макс. цены) | 1. Открыта страница каталога товаров. | 1. В поле "Мин. цена" ввести значение "1000".<br>2. В поле "Макс. цена" ввести значение "100".<br>3. Нажать кнопку "Применить фильтры". | Отображается сообщение об ошибке "Минимальная цена не может превышать максимальную" ИЛИ список товаров пуст (поведение должно быть согласовано с аналитиком). | | |
| **AC3-TC1** | Проверка отображения сообщения при отсутствии товаров по фильтру | 1. Открыта страница каталога. Известно, что в каталоге нет товаров дороже 1000 у.е. | 1. В поле "Мин. цена" ввести значение "1500".<br>2. В поле "Макс. цена" ввести значение "2000".<br>3. Нажать кнопку "Применить фильтры". | В области результатов поиска отображается текст "Товары не найдены". Список товаров пуст. | | |
| **EXT-TC1** | Проверка сброса фильтра по цене | 1. Применен активный фильтр по цене. Список товаров отфильтрован. | 1. Нажать на кнопку "Сбросить фильтры" или "Очистить". | Поля "Мин. цена" и "Макс. цена" очищены. Отображается полный, неотфильтрованный список товаров. | | |
```