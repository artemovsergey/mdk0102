# Практическая работа 5. Использование различных методов Assert в xUnit

## **Тема**
Освоение различных методов утверждений (Assert) в xUnit для комплексного тестирования приложений.

## **Цель**
Научить студентов применять различные методы класса Assert для проверки различных условий в юнит-тестах:
- Проверка равенства значений
- Проверка булевых условий
- Проверка исключений
- Проверка коллекций
- Проверка ссылочных типов

## **Теоретическая часть**

**Assert** - основной класс в xUnit для проверки ожидаемых результатов. Разнообразие методов Assert позволяет тестировать различные аспекты поведения кода.

### **Основные группы методов Assert:**

**1. Проверка равенства:**
- `Assert.Equal(expected, actual)` - проверка равенства
- `Assert.NotEqual(expected, actual)` - проверка неравенства
- `Assert.StrictEqual(expected, actual)` - строгое сравнение (с учетом типов)
- `Assert.NotStrictEqual(expected, actual)` - нестрогое сравнение

**2. Проверка условий:**
- `Assert.True(condition)` - проверка истинности
- `Assert.False(condition)` - проверка ложности

**3. Проверка null:**
- `Assert.Null(object)` - проверка на null
- `Assert.NotNull(object)` - проверка на не-null

**4. Проверка исключений:**
- `Assert.Throws<T>(action)` - проверка выброса исключения типа T
- `Assert.ThrowsAsync<T>(asyncAction)` - проверка асинхронных исключений

**5. Проверка коллекций:**
- `Assert.Contains(item, collection)` - проверка наличия элемента
- `Assert.DoesNotContain(item, collection)` - проверка отсутствия элемента
- `Assert.Empty(collection)` - проверка пустой коллекции
- `Assert.NotEmpty(collection)` - проверка непустой коллекции

**6. Проверка типов:**
- `Assert.IsType<T>(object)` - проверка точного типа
- `Assert.IsAssignableFrom<T>(object)` - проверка возможности приведения

## **Ход работы**

1. Создайте решение с двумя проектами:
   - **Проект приложения**: `AssertMethodsDemo`
   - **Тестовый проект**: `AssertMethodsDemo.Tests`

2. Реализуйте класс `DataProcessor` с методами согласно вашему варианту

3. Напишите комплексные тесты, используя различные методы Assert

4. Создайте папку `images` со скриншотом результатов тестов

5. Оформите README.md согласно требованиям

## **Практический пример**

**Проект приложения:**
```csharp
namespace AssertMethodsDemo
{
    public class DataProcessor
    {
        public int CalculateAverage(int[] numbers)
        {
            if (numbers == null || numbers.Length == 0)
                throw new ArgumentException("Array cannot be null or empty");
            
            return (int)numbers.Average();
        }

        public bool ValidateEmail(string email)
        {
            return !string.IsNullOrEmpty(email) && 
                   email.Contains("@") && 
                   email.Contains(".");
        }

        public List<string> FilterStrings(List<string> input, string filter)
        {
            return input?.Where(s => s.Contains(filter)).ToList() ?? new List<string>();
        }
    }
}
```

**Тестовый проект:**
```csharp
using Xunit;
using AssertMethodsDemo;

namespace AssertMethodsDemo.Tests
{
    public class DataProcessorTests
    {
        private readonly DataProcessor _processor;

        public DataProcessorTests()
        {
            _processor = new DataProcessor();
        }

        [Fact]
        public void CalculateAverage_ValidArray_ReturnsCorrectValue()
        {
            // Arrange
            int[] numbers = { 1, 2, 3, 4, 5 };

            // Act
            int result = _processor.CalculateAverage(numbers);

            // Assert - проверка равенства
            Assert.Equal(3, result);
            Assert.NotEqual(0, result);
        }

        [Fact]
        public void CalculateAverage_EmptyArray_ThrowsException()
        {
            // Arrange
            int[] numbers = Array.Empty<int>();

            // Act & Assert - проверка исключения
            var exception = Assert.Throws<ArgumentException>(() => 
                _processor.CalculateAverage(numbers));
            
            Assert.Contains("cannot be null or empty", exception.Message);
        }

        [Theory]
        [InlineData("test@example.com", true)]
        [InlineData("invalid-email", false)]
        [InlineData("", false)]
        [InlineData(null, false)]
        public void ValidateEmail_VariousInputs_ReturnsExpectedResult(string email, bool expected)
        {
            // Act
            bool result = _processor.ValidateEmail(email);

            // Assert - проверка условий
            Assert.Equal(expected, result);
            
            if (expected)
                Assert.True(result);
            else
                Assert.False(result);
        }

        [Fact]
        public void FilterStrings_ValidInput_ReturnsFilteredList()
        {
            // Arrange
            var input = new List<string> { "apple", "banana", "grape", "pineapple" };
            string filter = "apple";

            // Act
            var result = _processor.FilterStrings(input, filter);

            // Assert - проверка коллекций
            Assert.NotNull(result);
            Assert.NotEmpty(result);
            Assert.Contains("apple", result);
            Assert.Contains("pineapple", result);
            Assert.DoesNotContain("banana", result);
            Assert.Equal(2, result.Count);
        }

        [Fact]
        public void FilterStrings_NullInput_ReturnsEmptyList()
        {
            // Act
            var result = _processor.FilterStrings(null, "test");

            // Assert - проверка коллекций и типов
            Assert.NotNull(result);
            Assert.Empty(result);
            Assert.IsType<List<string>>(result);
        }
    }
}
```

---

## **Варианты заданий**

**Вариант 1:** Класс `StringValidator` с методами:
- `bool IsPalindrome(string text)`
- `string ReverseString(string input)`
- `int CountWords(string text)`

**Вариант 2:** Класс `MathOperations` с методами:
- `int Power(int base, int exponent)`
- `bool IsPrime(int number)`
- `int[] GetDivisors(int number)`

**Вариант 3:** Класс `DateHelper` с методами:
- `bool IsLeapYear(int year)`
- `int GetDaysInMonth(int year, int month)`
- `bool IsWeekend(DateTime date)`

**Вариант 4:** Класс `CollectionHelper` с методами:
- `int[] RemoveDuplicates(int[] array)`
- `int FindSecondLargest(int[] array)`
- `bool AreArraysEqual(int[] arr1, int[] arr2)`

**Вариант 5:** Класс `FileProcessor` с методами:
- `string ReadFileContent(string path)` (с исключениями)
- `bool ValidateFilePath(string path)`
- `string GetFileExtension(string filename)`

**Вариант 6:** Класс `BankAccount` с методами:
- `void Deposit(decimal amount)`
- `bool Withdraw(decimal amount)` (с проверкой баланса)
- `decimal GetBalance()`

**Вариант 7:** Класс `Student` с методами:
- `void AddGrade(int grade)` (с валидацией)
- `double CalculateAverage()`
- `bool IsExcellentStudent()`

**Вариант 8:** Класс `PasswordChecker` с методами:
- `bool IsStrongPassword(string password)`
- `int GetPasswordStrength(string password)`
- `string GenerateRandomPassword(int length)`

**Вариант 9:** Класс `GeometryCalculator` с методами:
- `double CalculateCircleArea(double radius)`
- `double CalculateTriangleArea(double a, double b, double c)`
- `bool IsRightTriangle(double a, double b, double c)`

**Вариант 10:** Класс `TextAnalyzer` с методами:
- `int CountVowels(string text)`
- `int CountConsonants(string text)`
- `Dictionary<char, int> GetCharacterFrequency(string text)`

**Вариант 11:** Класс `NumberConverter` с методами:
- `string DecimalToBinary(int number)`
- `int BinaryToDecimal(string binary)`
- `string DecimalToRoman(int number)`

**Вариант 12:** Класс `ShoppingCart` с методами:
- `void AddProduct(Product product)`
- `bool RemoveProduct(int productId)`
- `decimal CalculateTotal()`

**Вариант 13:** Класс `EmailValidator` с методами:
- `bool IsValidEmail(string email)`
- `string ExtractDomain(string email)`
- `bool IsCorporateEmail(string email)`

**Вариант 14:** Класс `StringFormatter` с методами:
- `string CapitalizeWords(string text)`
- `string RemoveExtraSpaces(string text)`
- `string[] SplitIntoWords(string text)`

**Вариант 15:** Класс `ArrayProcessor` с методами:
- `int[] SortArray(int[] array)`
- `int[] MergeArrays(int[] arr1, int[] arr2)`
- `int FindMedian(int[] array)`

---

## **Критерии оценки**

**5 (Отлично):**
- Реализованы все методы согласно варианту
- Написаны комплексные тесты, использующие минимум 8 различных методов Assert
- Тесты покрывают основные, граничные и ошибочные сценарии
- Использованы `[Fact]`, `[Theory]` и `[InlineData]` где это уместно
- Все тесты проходят, код хорошо организован

**4 (Хорошо):**
- Реализованы основные методы
- Использовано 5-7 различных методов Assert
- Тесты покрывают основные сценарии, но могут отсутствовать некоторые граничные случаи
- Все тесты проходят

**3 (Удовлетворительно):**
- Реализована часть методов
- Использовано 3-4 метода Assert
- Тесты покрывают только основные сценарии
- Возможны незначительные ошибки в логике

**2 (Неудовлетворительно):**
- Методы не реализованы или реализованы некорректно
- Тесты не написаны или не компилируются
- Использовано менее 3 методов Assert

---

## **Контрольные вопросы**

1. Какие группы методов Assert вы знаете и для чего они используются?
2. В чем разница между `Assert.Equal` и `Assert.StrictEqual`?
3. Как проверить, что метод выбрасывает определенное исключение?
4. Какими способами можно проверить содержимое коллекции?
5. Когда следует использовать `Assert.True` вместо `Assert.Equal`?
6. Как проверить тип возвращаемого значения?
7. Почему важно тестировать не только успешные сценарии, но и ошибочные?

---

## **Пример README.md для варианта 1**

```markdown
# Практическая работа: Использование различных методов Assert

**Вариант: 1**

**Задание:**
Реализовать класс `StringValidator` с методами:
- `bool IsPalindrome(string text)` - проверяет, является ли строка палиндромом
- `string ReverseString(string input)` - возвращает перевернутую строку
- `int CountWords(string text)` - подсчитывает количество слов в строке

Написать юнит-тесты, используя различные методы Assert.

**Код реализации:**

```csharp
// AssertMethodsDemo/StringValidator.cs
using System;
using System.Linq;

namespace AssertMethodsDemo
{
    public class StringValidator
    {
        public bool IsPalindrome(string text)
        {
            if (string.IsNullOrEmpty(text))
                return false;
                
            string clean = new string(text.ToLower().Where(char.IsLetterOrDigit).ToArray());
            return clean.SequenceEqual(clean.Reverse());
        }

        public string ReverseString(string input)
        {
            if (input == null)
                throw new ArgumentNullException(nameof(input));
                
            return new string(input.Reverse().ToArray());
        }

        public int CountWords(string text)
        {
            if (string.IsNullOrWhiteSpace(text))
                return 0;
                
            return text.Split(new[] { ' ', '\t', '\n' }, StringSplitOptions.RemoveEmptyEntries).Length;
        }
    }
}
```

**Код тестов:**

```csharp
// AssertMethodsDemo.Tests/StringValidatorTests.cs
using Xunit;
using AssertMethodsDemo;

namespace AssertMethodsDemo.Tests
{
    public class StringValidatorTests
    {
        private readonly StringValidator _validator;

        public StringValidatorTests()
        {
            _validator = new StringValidator();
        }

        [Theory]
        [InlineData("racecar", true)]
        [InlineData("A man a plan a canal Panama", true)]
        [InlineData("hello", false)]
        [InlineData("", false)]
        [InlineData(null, false)]
        public void IsPalindrome_VariousInputs_ReturnsExpected(string input, bool expected)
        {
            // Act
            bool result = _validator.IsPalindrome(input);

            // Assert
            Assert.Equal(expected, result);
            Assert.IsType<bool>(result);
        }

        [Fact]
        public void ReverseString_ValidInput_ReturnsReversedString()
        {
            // Arrange
            string input = "hello world";

            // Act
            string result = _validator.ReverseString(input);

            // Assert
            Assert.NotNull(result);
            Assert.Equal("dlrow olleh", result);
            Assert.NotEqual(input, result);
        }

        [Fact]
        public void ReverseString_NullInput_ThrowsException()
        {
            // Act & Assert
            var exception = Assert.Throws<ArgumentNullException>(() => 
                _validator.ReverseString(null));
                
            Assert.NotNull(exception);
            Assert.Contains("input", exception.Message);
        }

        [Theory]
        [InlineData("Hello world", 2)]
        [InlineData("One two three four", 4)]
        [InlineData("", 0)]
        [InlineData("   ", 0)]
        public void CountWords_VariousInputs_ReturnsCorrectCount(string text, int expected)
        {
            // Act
            int result = _validator.CountWords(text);

            // Assert
            Assert.Equal(expected, result);
            Assert.True(result >= 0);
            Assert.IsType<int>(result);
            
            if (string.IsNullOrWhiteSpace(text))
                Assert.Equal(0, result);
        }
    }
}
```

**Результат выполнения тестов:**
![Скриншот тестов](images/test_results.png)
```