# Лекция 16. Локаторы в Selenium. ID, Class, CSS Selectors, XPath

## Цель лекции

Научить студентов использовать разные локаторы в Selenium WebDriver для поиска элементов на веб-странице, понять принципы работы каждого типа локатора и их преимущества/ограничения.

---

## План лекции

1. Введение в локаторы в Selenium
2. Локатор **ID**
3. Локатор **Class Name**
4. Локатор **CSS Selector**
5. Локатор **XPath**
6. Сравнение локаторов и рекомендации по использованию
7. Примеры кода на C#
8. Резюме
9. Контрольные вопросы

---

## 1. Введение в локаторы в Selenium

**Локаторы** — это способы найти элемент на веб-странице для взаимодействия с ним (клик, ввод текста, получение текста).

Основные типы локаторов в Selenium:

* ID
* Name
* Class Name
* Tag Name
* Link Text / Partial Link Text
* CSS Selector
* XPath

Выбор локатора влияет на **скорость теста** и **надёжность автоматизации**.

> Совет: всегда выбирайте локатор, который наиболее **уникален и стабилен**.

---

## 2. Локатор **ID**

* `ID` — уникальный идентификатор элемента на странице.
* Самый быстрый и надежный локатор, если `ID` уникален.

**Пример кода на C#:**

```csharp
IWebElement username = driver.FindElement(By.Id("username"));
username.SendKeys("testuser");
```

**Пример HTML:**

```html
<input type="text" id="username" />
```

**Плюсы:**

* Быстрый поиск
* Простота использования

**Минусы:**

* Иногда ID динамически генерируется и меняется при перезагрузке страницы.

---

## 3. Локатор **Class Name**

* `Class Name` ищет элементы по атрибуту `class`.
* Может быть несколько элементов с одинаковым классом.

**Пример кода:**

```csharp
IWebElement button = driver.FindElement(By.ClassName("login-btn"));
button.Click();
```

**Пример HTML:**

```html
<button class="login-btn">Login</button>
```

**Особенности:**

* Если класс общий для нескольких элементов, возвращается **первый найденный элемент**.
* Для выбора всех элементов используется `FindElements`:

```csharp
var buttons = driver.FindElements(By.ClassName("login-btn"));
```

---

## 4. Локатор **CSS Selector**

* CSS Selector — очень мощный локатор, который позволяет искать элементы по **тегу, классу, ID, атрибутам, иерархии**.
* Синтаксис напоминает CSS в стилях.

**Примеры:**

```csharp
// По ID
IWebElement username = driver.FindElement(By.CssSelector("#username"));

// По классу
IWebElement button = driver.FindElement(By.CssSelector(".login-btn"));

// По тегу и атрибуту
IWebElement input = driver.FindElement(By.CssSelector("input[type='text']"));

// Вложенные элементы
IWebElement submit = driver.FindElement(By.CssSelector("form.login-form button.submit"));
```

**HTML пример:**

```html
<form class="login-form">
    <input type="text" id="username" />
    <button class="submit">Login</button>
</form>
```

**Плюсы CSS Selectors:**

* Гибкость
* Можно искать вложенные элементы
* Более быстрый, чем XPath в большинстве браузеров

**Минусы:**

* Менее читаем, чем ID
* Сложно использовать для динамически меняющихся структур

---

## 5. Локатор **XPath**

* XPath — язык запросов для поиска элементов в XML/HTML дереве.
* Позволяет искать **по атрибутам, тексту, иерархии, условиям**.

**Примеры:**

```csharp
// По ID
IWebElement username = driver.FindElement(By.XPath("//*[@id='username']"));

// По тексту
IWebElement loginBtn = driver.FindElement(By.XPath("//button[text()='Login']"));

// По классу и атрибуту
IWebElement input = driver.FindElement(By.XPath("//input[@class='login-input' and @type='text']"));

// Вложенные элементы
IWebElement submit = driver.FindElement(By.XPath("//form[@class='login-form']/button[@class='submit']"));
```

**Плюсы XPath:**

* Самый гибкий способ поиска
* Можно искать элементы по тексту
* Можно строить сложные условия

**Минусы:**

* Медленнее, чем ID и CSS Selector
* Сложнее читать и поддерживать

---

## 6. Сравнение локаторов

| Локатор      | Скорость     | Надежность | Пример использования                   |
| ------------ | ------------ | ---------- | -------------------------------------- |
| ID           | Очень быстро | Высокая    | `By.Id("username")`                    |
| Class Name   | Быстро       | Средняя    | `By.ClassName("login-btn")`            |
| CSS Selector | Быстро       | Высокая    | `By.CssSelector("form.login button")`  |
| XPath        | Средне       | Высокая    | `By.XPath("//button[text()='Login']")` |

> Рекомендация: использовать **ID → CSS Selector → XPath**, только если другие варианты недоступны.

---

## 7. Примеры кода на C#

```csharp
IWebDriver driver = new ChromeDriver();
driver.Navigate().GoToUrl("https://example.com");

// Используем ID
driver.FindElement(By.Id("username")).SendKeys("user");

// Используем Class Name
driver.FindElement(By.ClassName("login-btn")).Click();

// Используем CSS Selector
driver.FindElement(By.CssSelector("form.login-form input[type='password']")).SendKeys("123456");

// Используем XPath
driver.FindElement(By.XPath("//button[text()='Login']")).Click();

driver.Quit();
```

---

## 8. Резюме

* Локаторы — это способ найти элементы на веб-странице для автоматизации.
* **ID** — самый быстрый и надежный локатор.
* **Class Name** — подходит, если класс уникален или используется `FindElements`.
* **CSS Selector** — гибкий и быстрый, можно искать по структуре и атрибутам.
* **XPath** — самый гибкий и мощный, но медленнее и сложнее в чтении.
* Всегда выбирайте локатор, который **устойчив к изменениям страницы**.

---

## 9. Контрольные вопросы

1. Что такое локаторы в Selenium?
2. Почему ID считается самым надежным локатором?
3. Как искать элемент по классу? Что делать, если элементов несколько?
4. Приведите пример CSS Selector для вложенного элемента.
5. Как искать элемент по тексту с помощью XPath?
6. Какие локаторы вы бы использовали в первую очередь и почему?
7. В чем основные различия между CSS Selector и XPath?
