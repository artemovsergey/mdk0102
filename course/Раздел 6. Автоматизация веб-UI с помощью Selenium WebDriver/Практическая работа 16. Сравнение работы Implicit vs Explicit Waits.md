# Практическая работа 16. Сравнение работы Implicit vs Explicit Waits

## Цель работы

* Научиться использовать **Implicit Wait** и **Explicit Wait** в Selenium WebDriver.
* Понять различия между этими типами ожиданий и их влияние на стабильность тестов.
* Научиться выбирать подходящий тип ожидания для различных сценариев динамических веб-элементов.

---

## Теоретическая часть

### Implicit Wait

* Глобальное ожидание для поиска всех элементов.
* Задаётся один раз для WebDriver и применяется ко всем `FindElement` и `FindElements`.
* Если элемент не найден, WebDriver пробует искать его **до истечения времени ожидания**.

```csharp
driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(10);
```

**Преимущества:**

* Простая настройка.
* Подходит для небольших задержек элементов на странице.

**Недостатки:**

* Не подходит для проверки условий, таких как кликабельность или появление текста.
* Может замедлять тесты при больших таймаутах.

---

### Explicit Wait

* Локальное ожидание с конкретным условием для конкретного элемента.
* Использует класс `WebDriverWait` и `ExpectedConditions`.

```csharp
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
IWebElement element = wait.Until(ExpectedConditions.ElementToBeClickable(By.Id("loginBtn")));
```

**Преимущества:**

* Гибкость: можно ждать кликабельность, видимость, текст и другие условия.
* Используется для динамических элементов и AJAX-запросов.

**Недостатки:**

* Нужно явно указывать для каждого элемента.

---

### Отличия Implicit vs Explicit

| Характеристика | Implicit Wait                | Explicit Wait                          |
| -------------- | ---------------------------- | -------------------------------------- |
| Применение     | Глобально для всех элементов | Локально для конкретного элемента      |
| Настройка      | Один раз                     | Для каждого условия отдельно           |
| Условия        | Только поиск элементов       | Видимость, кликабельность, текст и др. |
| Использование  | Простые статические страницы | Динамические страницы, AJAX            |

---

## Ход работы

### Шаг 1. Создание проекта

1. Создать **NUnit Test Project** на C#.
2. Установить через NuGet:

   * `Selenium.WebDriver`
   * `Selenium.WebDriver.ChromeDriver`
   * `Selenium.Support`

---

### Шаг 2. Настройка WebDriver с Implicit Wait

```csharp
using NUnit.Framework;
using OpenQA.Selenium;
using OpenQA.Selenium.Chrome;

[TestFixture]
public class ImplicitWaitTests
{
    private IWebDriver _driver;

    [SetUp]
    public void Setup()
    {
        _driver = new ChromeDriver();
        _driver.Manage().Window.Maximize();
        _driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(10); // Implicit Wait
        _driver.Navigate().GoToUrl("https://example.com/dynamic");
    }

    [Test]
    public void TestImplicitWait()
    {
        IWebElement dynamicElement = _driver.FindElement(By.Id("dynamicElement"));
        dynamicElement.Click();
        Assert.IsTrue(dynamicElement.Displayed);
    }

    [TearDown]
    public void TearDown()
    {
        _driver.Quit();
    }
}
```

---

### Шаг 3. Настройка WebDriver с Explicit Wait

```csharp
using OpenQA.Selenium.Support.UI;
using SeleniumExtras.WaitHelpers;

[TestFixture]
public class ExplicitWaitTests
{
    private IWebDriver _driver;
    private WebDriverWait _wait;

    [SetUp]
    public void Setup()
    {
        _driver = new ChromeDriver();
        _driver.Manage().Window.Maximize();
        _driver.Navigate().GoToUrl("https://example.com/dynamic");
        _wait = new WebDriverWait(_driver, TimeSpan.FromSeconds(10)); // Explicit Wait
    }

    [Test]
    public void TestExplicitWait()
    {
        IWebElement dynamicElement = _wait.Until(ExpectedConditions.ElementToBeClickable(By.Id("dynamicElement")));
        dynamicElement.Click();
        Assert.IsTrue(dynamicElement.Displayed);
    }

    [TearDown]
    public void TearDown()
    {
        _driver.Quit();
    }
}
```

---

### Шаг 4. Сравнение работы

* Запустить оба теста на странице с динамическим элементом.
* Обратить внимание на время ожидания и стабильность тестов.
* Сделать скриншоты и сохранить их в папку `/images`.

---

## Варианты заданий (по номеру в журнале)

1. Использовать Implicit Wait для поиска кнопки «Start»
2. Использовать Explicit Wait для поиска кнопки «Start»
3. Сравнить время выполнения теста с Implicit и Explicit Wait
4. Использовать Implicit Wait для поля ввода и проверить видимость
5. Использовать Explicit Wait для поля ввода и проверить кликабельность
6. Дождаться появления текста с помощью Explicit Wait
7. Использовать Implicit Wait для чекбокса и отметить его
8. Дождаться кнопки «Submit» и кликнуть через Explicit Wait
9. Сравнить поведение теста при малом и большом таймауте Implicit Wait
10. Использовать Explicit Wait с `TextToBePresentInElement`
11. Использовать Implicit Wait для элемента, который появляется через AJAX
12. Проверить кликабельность ссылки с помощью Explicit Wait
13. Использовать Implicit Wait и проверить видимость всех элементов меню
14. Использовать Explicit Wait для динамической загрузки изображения
15. Комбинированный тест: Implicit Wait + Explicit Wait для нескольких элементов

---

## Критерии оценки

| Оценка | Критерии                                                                                    |
| ------ | ------------------------------------------------------------------------------------------- |
| 2      | Тест создан, но ожидания не используются корректно                                          |
| 3      | Используется один тип ожидания (Implicit или Explicit)                                      |
| 4      | Используются оба типа ожиданий, тесты проходят стабильно                                    |
| 5      | Используются оба типа ожиданий, тесты структурированы, есть Page Object, скриншоты и readme |

---

## Контрольные вопросы

1. Чем отличается Implicit Wait от Explicit Wait?
2. Когда лучше использовать Explicit Wait вместо Implicit Wait?
3. Как задать таймаут для Implicit Wait?
4. Какие условия можно использовать с Explicit Wait?
5. Что произойдет, если элемент не появился за время ожидания?
6. Можно ли комбинировать Implicit и Explicit Wait? Какие могут быть последствия?
7. Как структурировать тесты с ожиданиями для стабильности?

---

## Структура репозитория

```
WaitComparisonTests/
│
├─ Drivers/          # Инициализация WebDriver
├─ Pages/            # Page классы (опционально)
├─ Tests/            # Тестовые классы с Implicit и Explicit Wait
├─ images/           # Скриншоты работы тестов
└─ readme.md         # Описание работы, вариант, текст задания
```

### Пример `readme.md`

````markdown
# Практическая работа №16
## Тема: Сравнение работы Implicit vs Explicit Waits
### Вариант: 3

**Задание:** Использовать Implicit и Explicit Wait для поиска динамического элемента и сравнить стабильность и время выполнения тестов.

**Пример кода (Explicit Wait):**
```csharp
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
IWebElement dynamicElement = wait.Until(ExpectedConditions.ElementToBeClickable(By.Id("dynamicElement")));
dynamicElement.Click();
````

```