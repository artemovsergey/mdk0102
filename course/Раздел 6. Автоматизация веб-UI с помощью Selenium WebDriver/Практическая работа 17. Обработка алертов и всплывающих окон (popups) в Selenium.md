# Практическая работа 17. Обработка алертов и всплывающих окон (popups) в Selenium с xUnit

## Цель работы

* Научиться работать с **JavaScript alert, confirm и prompt** в Selenium WebDriver с использованием xUnit.
* Освоить методы **`SwitchTo().Alert()`**, **`Accept()`**, **`Dismiss()`**, **`SendKeys()`**.
* Научиться проверять тексты алертов и взаимодействовать с ними в автоматизированных тестах.

---

## Теоретическая часть

### Типы всплывающих окон

| Тип         | Описание                                       | Методы Selenium                               |
| ----------- | ---------------------------------------------- | --------------------------------------------- |
| **Alert**   | Простое сообщение с кнопкой OK                 | `driver.SwitchTo().Alert().Accept()`          |
| **Confirm** | Сообщение с кнопками OK и Cancel               | `Accept()` / `Dismiss()`                      |
| **Prompt**  | Сообщение с полем ввода и кнопками OK / Cancel | `SendKeys("текст")`, `Accept()` / `Dismiss()` |

**Методы работы с алертами:**

* `driver.SwitchTo().Alert()` — переключение на алерт
* `alert.Text` — получение текста алерта
* `alert.Accept()` — нажать OK
* `alert.Dismiss()` — нажать Cancel
* `alert.SendKeys("текст")` — ввести текст в prompt

---

## Ход работы

### Шаг 1. Подготовка проекта

1. Создать **xUnit Test Project (.NET)** на C#.
2. Установить через NuGet:

   * `Selenium.WebDriver`
   * `Selenium.WebDriver.ChromeDriver`
   * `Selenium.Support`

---

### Шаг 2. Настройка WebDriver с xUnit

```csharp
using OpenQA.Selenium;
using OpenQA.Selenium.Chrome;
using Xunit;

namespace AlertHandlingTests
{
    public class AlertTests : IDisposable
    {
        private IWebDriver _driver;

        public AlertTests()
        {
            _driver = new ChromeDriver();
            _driver.Manage().Window.Maximize();
            _driver.Navigate().GoToUrl("https://example.com/alerts");
        }

        public void Dispose()
        {
            _driver.Quit();
        }
    }
}
```

---

### Шаг 3. Пример обработки обычного алерта

```csharp
[Fact]
public void AcceptAlertTest()
{
    IWebElement alertButton = _driver.FindElement(By.Id("alertButton"));
    alertButton.Click();

    IAlert alert = _driver.SwitchTo().Alert();
    string alertText = alert.Text;
    Assert.Equal("This is an alert", alertText);

    alert.Accept();
}
```

---

### Шаг 4. Пример обработки confirm

```csharp
[Fact]
public void DismissConfirmTest()
{
    IWebElement confirmButton = _driver.FindElement(By.Id("confirmButton"));
    confirmButton.Click();

    IAlert confirm = _driver.SwitchTo().Alert();
    string confirmText = confirm.Text;
    Assert.Equal("Do you want to proceed?", confirmText);

    confirm.Dismiss();
}
```

---

### Шаг 5. Пример обработки prompt

```csharp
[Fact]
public void PromptTest()
{
    IWebElement promptButton = _driver.FindElement(By.Id("promptButton"));
    promptButton.Click();

    IAlert prompt = _driver.SwitchTo().Alert();
    prompt.SendKeys("Test User");
    prompt.Accept();

    IWebElement result = _driver.FindElement(By.Id("promptResult"));
    Assert.Equal("Hello, Test User!", result.Text);
}
```

---

## Практический пример

**Сценарий:**

1. Открыть страницу с тремя типами алертов (Alert, Confirm, Prompt).
2. Для Alert — нажать OK.
3. Для Confirm — нажать Cancel.
4. Для Prompt — ввести текст и нажать OK.
5. Проверить результаты действий на странице.

---

## Варианты заданий (по номеру в журнале)

1. Обработка простого алерта с нажатием OK
2. Обработка confirm с нажатием Cancel
3. Обработка confirm с нажатием OK
4. Обработка prompt с вводом текста и нажатием OK
5. Обработка prompt с нажатием Cancel
6. Проверка текста алерта и его подтверждение
7. Проверка текста confirm и выбор действия
8. Проверка текста prompt и ввод разных значений
9. Создать тест для последовательного открытия всех алертов
10. Создать Page Object класс для алертов и использовать методы в тестах
11. Проверить, что после алерта страница корректно отображается
12. Обработка алерта с задержкой появления (использовать WebDriverWait)
13. Проверка корректности отображения результата действия confirm
14. Проверка корректности отображения результата действия prompt
15. Создать комбинированный тест: Alert → Confirm → Prompt

---

## Критерии оценки

| Оценка | Критерии                                                                             |
| ------ | ------------------------------------------------------------------------------------ |
| 2      | Тест создан, но не обрабатывает алерты полностью                                     |
| 3      | Обрабатывается один тип алерта (Alert, Confirm или Prompt)                           |
| 4      | Обрабатываются все три типа алертов, тесты проходят стабильно                        |
| 5      | Все алерты обработаны, используются проверки текста, Page Object, скриншоты и readme |

---

## Контрольные вопросы

1. Какие типы алертов существуют в Selenium?
2. Как переключиться на всплывающее окно?
3. Чем отличаются методы `Accept()` и `Dismiss()`?
4. Как ввести текст в prompt?
5. Что делать после обработки алерта для возврата к основной странице?
6. Как проверить текст алерта перед нажатием кнопки?
7. Как комбинировать работу с несколькими алертами в одном тесте?

---

## Структура репозитория

```
AlertHandlingTests/
│
├─ Drivers/          # Инициализация WebDriver
├─ Pages/            # Page классы (AlertPage.cs)
├─ Tests/            # Тестовые классы (AlertTests.cs)
├─ images/           # Скриншоты работы тестов
└─ readme.md         # Описание работы, вариант, текст задания
```

### Пример `readme.md`

````markdown
# Практическая работа №17
## Тема: Обработка алертов и всплывающих окон (popups) в Selenium с xUnit
### Вариант: 4

**Задание:** Обработать все типы алертов: Alert, Confirm и Prompt. Проверить тексты и результаты действий.

**Пример кода (Alert):**
```csharp
IAlert alert = driver.SwitchTo().Alert();
Assert.Equal("This is an alert", alert.Text);
alert.Accept();
````

```

